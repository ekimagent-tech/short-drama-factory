# 短劇工廠 (Short Drama Factory) - 產品規格書

## 1. 項目概述

**項目名稱：** 短劇工廠 (Short Drama Factory)  
**項目類型：** 生產級AI短劇創作平台  
**核心定位：** 企業級AI短視頻一站式生成工具  
**目標用戶：** 內容創作者、营销团队、广告公司、短视频平台运营者

---

## 2. 核心功能模塊

### 2.1 創作流程引擎

| 階段 | 功能 | 說明 |
|------|------|------|
| **階段一** | 主題輸入 | 用戶輸入創意主題/關鍵詞/場景描述 |
| **階段二** | 故事大綱生成 | AI生成3-5種故事大綱供選擇，可編輯/修改 |
| **階段三** | 劇本生成 | 根據大綱生成完整劇本（場景、對話、情感） |
| **階段四** | 分鏡生成 | 自動拆分劇本為分鏡，每個分鏡獨立處理 |

### 2.2 分鏡詳細規格

每個分鏡包含：
- **時長設定** (預設5秒，可調)
- **場景描述** (地點、環境、氛圍)
- **人物描述** (外觀、表情、動作)
- **運鏡指示** (推拉搖移、角度、特寫)
- **對話/旁白** (文字內容)
- **背景音效** (BGM、環境音、效果音)
- **情緒標籤** (開心、緊張、浪漫等)

### 2.3 參數設定中心

```
┌─────────────────────────────────────────┐
│  項目設定                                │
├─────────────────────────────────────────┤
│  □ 分鏡時長： 3-10秒 (預設5秒)           │
│  □ 畫面尺寸：                            │
│     • 9:16 (豎屏) - TikTok/Shorts       │
│     • 16:9 (橫屏) - YouTube              │
│     • 1:1 (方形) - Instagram             │
│     • 4:3 (傳統)                         │
│  □ 總劇長度： 30秒 / 60秒 / 90秒 / 自訂  │
│  □ 輸出品質： 720p / 1080p / 4K          │
│  □ 幀率： 24 / 30 / 60 fps               │
│  □ 風格preset： 電影 / 動漫 / 寫實 / 復古 │
└─────────────────────────────────────────┘
```

### 2.4 人物生成系統

- **輸入：** 劇本中的人物描述
- **輸出：** 風格一致的人物圖像 (文生圖)
- **功能：**
  - 人物庫管理（可保存/重用）
  - 多角色同時生成
  - 臉部一致性鎖定 (基于seed)
  - 服裝/造型替換
  - 角色情緒變體（同一角色不同表情）

### 2.5 分鏡生成工作流

```
劇本分鏡 → 文字描述 
              ↓
         [第一幀] ──→ [最後幀]  (文生圖)
              ↓              ↓
         圖片 ───────────────→ 圖片
              ↓              ↓
         [圖生視頻 Workflow]  (ComfyUI)
              ↓
         短片片段 ←───────────
              ↓
         [片段合併] + [配音]
              ↓
         完整短劇輸出
```

### 2.6 本地ComfyUI集成

**使用之本Workflow類型：**
1. **人物生成 Workflow** - Stable Diffusion XL/Turbo
2. **場景生成 Workflow** - 環境/背景生成
3. **圖生視頻 Workflow** - LTX-Video / SVD / AnimateDiff
4. **畫質提升 Workflow** - 超分辨率/降噪
5. **片段合併 Workflow** - 視頻拼接+轉場

---

## 3. 高級功能建議 (生產級)

### 3.1 協作與版本管理

| 功能 | 說明 |
|------|------|
| **團隊協作** | 多用戶同時編輯同一項目 |
| **版本歷史** | 自動保存每個版本，可回滾 |
| **分支創作** | 同一劇本多版本並行開發 |
| **評論系統** | 分鏡級別的評論與標注 |
| **審核流程** | 提交審核、批准、修改請求 |

### 3.2 資產管理

- **素材庫：** 預設場景、道具、服裝、動作庫
- **音樂庫：** 授權BGM/音效商用授權
- **模板庫：** 常用劇情模板（告白、衝突、解決）
- **自定義資產：** 用戶上傳私人素材

### 3.3 AI增強功能

- **智能配音：** TTS多語言/多音色選擇
- **字幕生成：** 自動識別對話生成字幕
- **口型同步：** 根據配音調整口型
- **智能裁剪：** 自動識別主體調整構圖
- **場景補全：** AI填充缺失背景

### 3.4 導出與發布

- **多格式導出：** MP4, MOV, WebM, GIF
- **平台優化導出：** 一鍵生成各平台規格
- **發布集成：** 對接TikTok, YouTube, Instagram API
- **水印/LOGO：** 自定義片頭片尾

### 3.5 生產管理

| 功能 | 說明 |
|------|------|
| **項目儀表板** | 產量統計、效率分析、成本追蹤 |
| **任務排程** | 批量生成排隊管理 |
| **資源監控** | GPU/CPU使用率顯示 |
| **失敗重試** | 異常自動重試機制 |
| **優先級隊列** | 緊急任務優先處理 |

### 3.6 用戶系統

- **會員訂閱：** 免費/專業/企業三級
- **用量統計：** API調用、存儲空間、生成分鐘數
- **API接口：** 開放API供企業集成
- **Webhooks：** 生成完成/失敗事件通知

---

## 4. 技術架構建議

```
┌────────────────────────────────────────────────────────────┐
│                      前端層 (Frontend)                     │
│  React/Vue + TypeScript + Tailwind CSS                     │
│  WebSocket 實時進度 / WebRTC 預覽                           │
└────────────────────────────────────────────────────────────┘
                              ↓
┌────────────────────────────────────────────────────────────┐
│                      API層 (API Server)                     │
│  FastAPI/Express + JWT Auth + Redis Queue                   │
└────────────────────────────────────────────────────────────┘
                              ↓
┌────────────────────────────────────────────────────────────┐
│                      業務邏輯層 (Services)                   │
│  • 項目管理服務     • 劇本生成服務                          │
│  • 分鏡拆分服務     • 人物生成服務                          │
│  • 視頻合成服務     • 用戶權限服務                          │
└────────────────────────────────────────────────────────────┘
                              ↓
┌────────────────────────────────────────────────────────────┐
│                      AI引擎層 (AI Engine)                   │
│  • OpenAI GPT-4   (劇本/大綱)                              │
│  • ComfyUI (本地) (圖像/視頻生成)                           │
│  • Ollama (本地)   (中文優化)                               │
└────────────────────────────────────────────────────────────┘
                              ↓
┌────────────────────────────────────────────────────────────┐
│                      存儲層 (Storage)                        │
│  • PostgreSQL    (項目/用戶數據)                            │
│  • Redis         (緩存/隊列)                                │
│  • MinIO/S3      (視頻/圖片文件)                            │
│  • SQLite        (本地輕量版)                               │
└────────────────────────────────────────────────────────────┘
```

---

## 5. 開發階段規劃

### Phase 1: MVP (4-6週)
- [ ] 用戶登入/註冊
- [ ] 項目CRUD
- [ ] 主題→大綱→劇本流程
- [ ] 分鏡拆分+編輯
- [ ] 基本參數設定
- [ ] 人物生成(單一)
- [ ] 單分鏡生成(首尾幀)
- [ ] 導出功能

### Phase 2: 完善 (3-4週)
- [ ] 多人物生成
- [ ] 圖生視頻集成
- [ ] 片段合併
- [ ] 進度追蹤優化
- [ ] 暫停/中止/重試

### Phase 3: 高級功能 (4-6週)
- [ ] 團隊協作
- [ ] 版本管理
- [ ] 素材庫
- [ ] API開放
- [ ] 發布集成

### Phase 4: 企業級 (持續)
- [ ] 私有化部署
- [ ] 自定義工作流
- [ ] 高級分析儀表板
- [ ] SLA保障

---

## 6. 成功指標 (KPIs)

| 指標 | 目標 |
|------|------|
| 劇本生成滿意度 | >85% |
| 視頻生成成功率 | >95% |
| 平均生成時間 (60秒) | <15分鐘 |
| 用戶留存率 (30天) | >60% |
| 系統可用性 | >99.5% |

---

## 7. 潛在挑戰與解決方案

| 挑戰 | 解決方案 |
|------|----------|
| 中文劇本質量 | 微調LoRA + 提示詞優化 |
| 人物一致性 | FaceID + Seed鎖定 |
| 視頻流暢度 | 插幀算法 + 運動補償 |
| 本地算力不足 | 雲端彈性擴展選項 |
| 版權風險 | 素材審核 + 商用授權庫 |

---

## 8. 競爭優勢

1. **全本地部署** - 數據不出網，企業級安全
2. **中文優化** - 專為中文短劇設計
3. **一站式** - 從創意到成片全流程
4. **可擴展** - 模組化設計支持自定義
5. **成本可控** - 按需付費，無隱藏費用

---

*文檔版本：v1.0*  
*創建日期：2026-02-15*  
*作者：Ekim (HKT IT)*
